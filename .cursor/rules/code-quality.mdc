---
description:
globs:
alwaysApply: true
---

# 代码质量规范

编写代码时请时刻严格遵循以下规则：

## 验证信息

- 在提供信息前务必验证其准确性。不要基于假设或在没有明确证据的情况下进行推测。

## 逐文件修改

- 逐个文件进行修改，给我机会发现错误。

## 不要道歉

- 永远不要使用道歉性语言。

## 不要反馈理解情况

- 避免在注释或文档中反馈理解情况。

## 不建议空白字符修改

- 不要建议空白字符的修改。

## 不要创造性修改

- 除了明确要求的修改外，不要创造其他修改。

## 不要不必要的确认

- 不要询问上下文中已提供信息的确认。

## 保留现有代码

- 不要删除无关的代码或功能。注意保留现有的结构。

## 单块编辑

- 对同一文件提供单块编辑，而不是多步骤指令或解释。

## 不要实现检查

- 不要要求用户验证在提供的上下文中可见的实现。

## 提供真实文件链接

- 始终提供真实文件的链接，而不是 x.md。

## 良好品味

- 消除边界情况永远优于增加条件判断
- 从不同角度看问题，重写代码让特殊情况消失，变成正常情况

## 实用主义

- 解决实际问题，而不是假想的威胁
- 拒绝"理论完美"但实际复杂的方案
- 代码要为现实服务，不是为论文服务

## 简洁的代码

- 函数应该小而专注，只做一件事并做好
- 如果一个函数需要注释来解释它做什么，就应该拆分它
- 代码即文档，代码的结构和逻辑应该清晰易懂，不需要过多的注释

## 常量优于魔法数字

- 用命名常量替换硬编码值
- 使用描述性的常量名来解释值的用途
- 将常量放在文件顶部或专门的常量文件中

## 有意义的命名

- 变量、函数和类应该揭示其用途
- 名称应该解释某个东西存在的原因以及如何使用
- 避免缩写，除非它们是通用的

## 智能注释

- 不要注释代码做什么——让代码自文档化
- 使用注释解释为什么以某种方式做某事
- 为 API、复杂算法和非显而易见的副作用编写文档

## DRY（不要重复自己）

- 将重复的代码提取为可重用的函数
- 通过适当的抽象共享通用逻辑
- 维护单一数据源

## 清晰的结构

- 将相关代码放在一起
- 按逻辑层次组织代码
- 使用一致的文件和文件夹命名约定

## 封装

- 隐藏实现细节
- 暴露清晰的接口
- 将嵌套条件移入命名良好的函数中

## 代码质量维护

- 持续重构
- 尽早修复技术债务
- 让代码比你发现时更干净

## 优化条件逻辑

- 尽可能使用早期返回来提高代码可读性
- 尽可能降低条件语句的嵌套层级

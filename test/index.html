<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schema Editor æµ‹è¯•é¡µé¢</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 40px;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .header h1 {
      margin: 0 0 10px 0;
      color: #1890ff;
    }
    .header p {
      margin: 5px 0;
      color: #666;
    }
    .test-section {
      margin-bottom: 20px;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin: 20px 0 10px 0;
      padding: 10px;
      background: white;
      border-radius: 4px;
      border-left: 4px solid #1890ff;
    }
    .test-card {
      background: white;
      padding: 30px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    .test-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .test-card h3 {
      margin: 0 0 10px 0;
      color: #333;
    }
    .test-card p {
      margin: 5px 0;
      color: #666;
      font-size: 14px;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      margin-right: 8px;
    }
    .badge-success {
      background: #f6ffed;
      color: #52c41a;
      border: 1px solid #b7eb8f;
    }
    .badge-error {
      background: #fff1f0;
      color: #ff4d4f;
      border: 1px solid #ffccc7;
    }
    .attr-info {
      font-family: 'Consolas', 'Monaco', monospace;
      background: #f5f5f5;
      padding: 8px 12px;
      border-radius: 4px;
      margin-top: 10px;
      font-size: 13px;
    }
    .schema-display {
      margin-top: 10px;
      padding: 12px;
      background: #1e1e1e;
      border-radius: 4px;
      border: 1px solid #333;
    }
    .schema-title {
      font-weight: bold;
      margin-bottom: 8px;
      color: #4ec9b0;
      font-size: 13px;
    }
    .schema-content {
      margin: 0;
      font-size: 11px;
      line-height: 1.5;
      max-height: 200px;
      overflow-y: auto;
      color: #d4d4d4;
      font-family: 'Consolas', 'Monaco', monospace;
    }
    .console-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px;
      line-height: 1.6;
      max-height: 300px;
      overflow-y: auto;
      margin-top: 20px;
    }
    .console-log {
      color: #4ec9b0;
    }
    .console-info {
      color: #569cd6;
    }
    .console-warn {
      color: #dcdcaa;
    }
    .console-error {
      color: #f48771;
    }
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
      margin-right: 10px;
      font-size: 14px;
    }
    .btn-primary {
      background: #1890ff;
      color: white;
    }
    .btn-success {
      background: #52c41a;
      color: white;
    }
    .type-tag {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 8px;
    }
    .type-string { background: #fff7e6; color: #fa8c16; }
    .type-number { background: #e6f7ff; color: #1890ff; }
    .type-object { background: #f6ffed; color: #52c41a; }
    .type-array { background: #f9f0ff; color: #722ed1; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function TestApp() {
      const [logs, setLogs] = useState([]);
      const [schemaData, setSchemaData] = useState({});
      const logRef = useRef([]);
      const elementsRef = useRef({});

      const addLog = (type, message, data) => {
        const log = {
          type,
          message,
          data,
          time: new Date().toLocaleTimeString()
        };
        logRef.current = [...logRef.current.slice(-20), log];
        setLogs([...logRef.current]);
      };

      // Schema æ•°æ®å­˜å‚¨
      const schemaStore = useRef({
        // Stringç±»å‹æµ‹è¯•
        'string-simple': 'Hello World',
        'string-complex': 'This is a complex string with special chars: !@#$%^&*()',
        
        // Numberç±»å‹æµ‹è¯•
        'number-int': 42,
        'number-float': 3.14159,
        'number-negative': -100,
        
        // Objectç±»å‹æµ‹è¯•
        'object-simple': {
          name: 'Test Object',
          value: 123
        },
        'object-nested': {
          user: {
            id: 1,
            name: 'Alice',
            profile: {
              age: 25,
              city: 'Beijing'
            }
          },
          settings: {
            theme: 'dark',
            notifications: true
          }
        },
        
        // Arrayç±»å‹æµ‹è¯•
        'array-numbers': [1, 2, 3, 4, 5],
        'array-strings': ['apple', 'banana', 'cherry'],
        'array-objects': [
          { id: 1, name: 'Item 1' },
          { id: 2, name: 'Item 2' }
        ],
        
        // å¤šå‚æ•°ç»„åˆæµ‹è¯•
        'user-001,profile-001': {
          userId: 'user-001',
          profileId: 'profile-001',
          data: {
            username: 'alice',
            email: 'alice@example.com',
            age: 28
          }
        },
        'msg-001,comp-001,session-001': {
          messageId: 'msg-001',
          componentId: 'comp-001',
          sessionId: 'session-001',
          content: 'Multi-parameter test',
          timestamp: Date.now()
        },
        
        // è¶…é•¿å‚æ•°æµ‹è¯•
        'this-is-a-very-long-parameter-name-that-exceeds-normal-length-to-test-text-overflow-and-tooltip-display': {
          type: 'long-param-test',
          message: 'è¿™æ˜¯ä¸€ä¸ªè¶…é•¿å‚æ•°åç§°çš„æµ‹è¯•ç”¨ä¾‹',
          description: 'ç”¨äºæµ‹è¯•å‚æ•°åç§°è¿‡é•¿æ—¶çš„æ˜¾ç¤ºæ•ˆæœ'
        },
        
        // è¶…å¤šå‚æ•°æµ‹è¯•ï¼ˆ10ä¸ªå‚æ•°ï¼‰
        'param1,param2,param3,param4,param5,param6,param7,param8,param9,param10': {
          type: 'many-params-test',
          message: 'è¿™æ˜¯ä¸€ä¸ªè¶…å¤šå‚æ•°çš„æµ‹è¯•ç”¨ä¾‹',
          params: ['param1', 'param2', 'param3', 'param4', 'param5', 'param6', 'param7', 'param8', 'param9', 'param10'],
          description: 'ç”¨äºæµ‹è¯•å‚æ•°æ•°é‡è¿‡å¤šæ—¶çš„æ¢è¡Œå’Œæ˜¾ç¤ºæ•ˆæœ'
        },
        
        // å¸ƒå°”å’Œnullæµ‹è¯•
        'boolean-true': true,
        'boolean-false': false,
        'null-value': null
      });

      useEffect(() => {
        // åˆå§‹åŒ–æ˜¾ç¤ºæ‰€æœ‰Schemaæ•°æ®
        setSchemaData({ ...schemaStore.current });
        
        // å®ç°é¡µé¢å…¨å±€æ–¹æ³•
        window.__getSchemaByParams = (params) => {
          addLog('info', 'ğŸ” è°ƒç”¨ __getSchemaByParams', { params });
          
          const schema = schemaStore.current[params];
          
          if (schema !== undefined) {
            addLog('success', 'âœ… è¿”å› Schema æ•°æ®', schema);
            return schema;
          } else {
            const defaultSchema = {
              error: 'Schema not found',
              params: params,
              message: 'æœªæ‰¾åˆ°å¯¹åº”çš„Schemaæ•°æ®'
            };
            addLog('warn', 'âš ï¸ æœªæ‰¾åˆ°Schemaï¼Œè¿”å›é»˜è®¤å€¼', defaultSchema);
            return defaultSchema;
          }
        };

        window.__updateSchemaByParams = (schema, params) => {
          addLog('info', 'ğŸ’¾ è°ƒç”¨ __updateSchemaByParams', { 
            schema, 
            params 
          });

          try {
            // éªŒè¯schemaä¸ä¸ºç©º
            if (schema === null || schema === undefined) {
              throw new Error('Schema æ•°æ®ä¸èƒ½ä¸ºç©º');
            }

            // æ›´æ–° schema store
            schemaStore.current[params] = schema;
            
            // åˆ·æ–°æ˜¾ç¤º
            setSchemaData({ ...schemaStore.current });

            // æ›´æ–°æˆåŠŸ
            addLog('success', 'âœ… Schema æ›´æ–°æˆåŠŸ', { 
              params,
              newValue: schema
            });
            return true;
          } catch (error) {
            addLog('error', 'âŒ Schema æ›´æ–°å¤±è´¥', { error: error.message });
            return false;
          }
        };

        addLog('info', 'ğŸš€ æµ‹è¯•é¡µé¢å·²åŠ è½½', { message: 'å…¨å±€æ–¹æ³•å·²æ³¨å†Œ' });
      }, []);

      const testElements = [
        // Stringç±»å‹æµ‹è¯•
        {
          id: 'test-string-1',
          title: 'Stringç±»å‹ - ç®€å•å­—ç¬¦ä¸²',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºç®€å•å­—ç¬¦ä¸²',
          attrs: { 'data-schema-params': 'string-simple' },
          schemaKey: 'string-simple',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'String'
        },
        {
          id: 'test-string-2',
          title: 'Stringç±»å‹ - å¤æ‚å­—ç¬¦ä¸²',
          description: 'åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²',
          attrs: { 'data-schema-params': 'string-complex' },
          schemaKey: 'string-complex',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'String'
        },
        
        // Numberç±»å‹æµ‹è¯•
        {
          id: 'test-number-1',
          title: 'Numberç±»å‹ - æ•´æ•°',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºæ•´æ•°',
          attrs: { 'data-schema-params': 'number-int' },
          schemaKey: 'number-int',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Number'
        },
        {
          id: 'test-number-2',
          title: 'Numberç±»å‹ - æµ®ç‚¹æ•°',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºæµ®ç‚¹æ•°',
          attrs: { 'data-schema-params': 'number-float' },
          schemaKey: 'number-float',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Number'
        },
        {
          id: 'test-number-3',
          title: 'Numberç±»å‹ - è´Ÿæ•°',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºè´Ÿæ•°',
          attrs: { 'data-schema-params': 'number-negative' },
          schemaKey: 'number-negative',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Number'
        },
        
        // Objectç±»å‹æµ‹è¯•
        {
          id: 'test-object-1',
          title: 'Objectç±»å‹ - ç®€å•å¯¹è±¡',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºç®€å•å¯¹è±¡',
          attrs: { 'data-schema-params': 'object-simple' },
          schemaKey: 'object-simple',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        {
          id: 'test-object-2',
          title: 'Objectç±»å‹ - åµŒå¥—å¯¹è±¡',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºå¤æ‚åµŒå¥—å¯¹è±¡',
          attrs: { 'data-schema-params': 'object-nested' },
          schemaKey: 'object-nested',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        
        // Arrayç±»å‹æµ‹è¯•
        {
          id: 'test-array-1',
          title: 'Arrayç±»å‹ - æ•°å­—æ•°ç»„',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºæ•°å­—æ•°ç»„',
          attrs: { 'data-schema-params': 'array-numbers' },
          schemaKey: 'array-numbers',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Array'
        },
        {
          id: 'test-array-2',
          title: 'Arrayç±»å‹ - å­—ç¬¦ä¸²æ•°ç»„',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºå­—ç¬¦ä¸²æ•°ç»„',
          attrs: { 'data-schema-params': 'array-strings' },
          schemaKey: 'array-strings',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Array'
        },
        {
          id: 'test-array-3',
          title: 'Arrayç±»å‹ - å¯¹è±¡æ•°ç»„',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºå¯¹è±¡æ•°ç»„',
          attrs: { 'data-schema-params': 'array-objects' },
          schemaKey: 'array-objects',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Array'
        },
        
        // å¤šå‚æ•°æµ‹è¯•
        {
          id: 'test-multi-1',
          title: 'å¤šå‚æ•°æµ‹è¯• - ä¸¤ä¸ªå‚æ•°',
          description: 'åŒ…å«user-001å’Œprofile-001ä¸¤ä¸ªå‚æ•°',
          attrs: { 'data-schema-params': 'user-001,profile-001' },
          schemaKey: 'user-001,profile-001',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        {
          id: 'test-multi-2',
          title: 'å¤šå‚æ•°æµ‹è¯• - ä¸‰ä¸ªå‚æ•°',
          description: 'åŒ…å«msg-001ã€comp-001å’Œsession-001ä¸‰ä¸ªå‚æ•°',
          attrs: { 'data-schema-params': 'msg-001,comp-001,session-001' },
          schemaKey: 'msg-001,comp-001,session-001',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        {
          id: 'test-long-param',
          title: 'è¶…é•¿å‚æ•°æµ‹è¯•',
          description: 'å•ä¸ªè¶…é•¿å‚æ•°åç§°ï¼Œæµ‹è¯•çœç•¥å’Œtooltipæ˜¾ç¤º',
          attrs: { 'data-schema-params': 'this-is-a-very-long-parameter-name-that-exceeds-normal-length-to-test-text-overflow-and-tooltip-display' },
          schemaKey: 'this-is-a-very-long-parameter-name-that-exceeds-normal-length-to-test-text-overflow-and-tooltip-display',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        {
          id: 'test-many-params',
          title: 'è¶…å¤šå‚æ•°æµ‹è¯• - 10ä¸ªå‚æ•°',
          description: 'åŒ…å«10ä¸ªå‚æ•°ï¼Œæµ‹è¯•æ¢è¡Œæ˜¾ç¤ºæ•ˆæœ',
          attrs: { 'data-schema-params': 'param1,param2,param3,param4,param5,param6,param7,param8,param9,param10' },
          schemaKey: 'param1,param2,param3,param4,param5,param6,param7,param8,param9,param10',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Object'
        },
        
        // Booleanç±»å‹æµ‹è¯•
        {
          id: 'test-boolean-1',
          title: 'Booleanç±»å‹ - true',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºtrue',
          attrs: { 'data-schema-params': 'boolean-true' },
          schemaKey: 'boolean-true',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Boolean'
        },
        {
          id: 'test-boolean-2',
          title: 'Booleanç±»å‹ - false',
          description: 'å•å‚æ•°æµ‹è¯•ï¼Œschemaä¸ºfalse',
          attrs: { 'data-schema-params': 'boolean-false' },
          schemaKey: 'boolean-false',
          badge: 'success',
          badgeText: 'æœ‰æ•ˆ',
          typeTag: 'Boolean'
        },
        
        // æ— æ•ˆæµ‹è¯•
        {
          id: 'test-null',
          title: 'Nullå€¼æµ‹è¯•ï¼ˆæ— æ•ˆï¼‰',
          description: 'nullå€¼ä¸æ”¯æŒç¼–è¾‘ï¼Œåº”æ˜¾ç¤º"éæ³•ç›®æ ‡"',
          attrs: {},
          schemaKey: null,
          badge: 'error',
          badgeText: 'éæ³•',
          typeTag: null
        },
        {
          id: 'test-invalid',
          title: 'æ— å±æ€§æµ‹è¯•',
          description: 'ä¸åŒ…å«ä»»ä½•data-schema-paramså±æ€§ï¼Œåº”æ˜¾ç¤º"éæ³•ç›®æ ‡"',
          attrs: {},
          schemaKey: null,
          badge: 'error',
          badgeText: 'éæ³•',
          typeTag: null
        }
      ];

      // ä¸ºæ¯ä¸ªå…ƒç´ è®¾ç½®refå›è°ƒï¼Œåœ¨å…ƒç´ æŒ‚è½½æ—¶æ·»åŠ HTML dataå±æ€§
      const setElementRef = (id, attrs) => (element) => {
        if (element && attrs && Object.keys(attrs).length > 0) {
          elementsRef.current[id] = element;
          Object.keys(attrs).forEach(key => {
            element.setAttribute(key, attrs[key]);
          });
        }
      };

      const getTypeClassName = (typeTag) => {
        if (!typeTag) return '';
        return `type-${typeTag.toLowerCase()}`;
      };

      return (
        <div className="container">
          <div className="header">
            <h1>ğŸ”§ Schema Editor æµ‹è¯•é¡µé¢ï¼ˆé€šç”¨ç‰ˆï¼‰</h1>
            <p>ğŸ“Œ <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong></p>
            <p>1. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ Schema Editor å›¾æ ‡æ¿€æ´»æ’ä»¶</p>
            <p>2. <strong>æŒ‰ä½ Alt/Option é”®</strong>å¹¶å°†é¼ æ ‡æ‚¬åœåœ¨ä¸‹æ–¹çš„æµ‹è¯•å…ƒç´ ä¸Šï¼Œè§‚å¯Ÿé«˜äº®æ•ˆæœå’Œæç¤º</p>
            <p>3. <strong>æŒ‰ä½ Alt/Option é”®å¹¶ç‚¹å‡»</strong>æœ‰æ•ˆçš„å…ƒç´ ï¼Œä¼šæ‰“å¼€å³ä¾§æŠ½å±‰å¹¶åŠ è½½ Schema æ•°æ®</p>
            <p>4. åœ¨ Monaco Editor ä¸­ç¼–è¾‘ JSONï¼Œç‚¹å‡»ä¿å­˜åæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º</p>
            <p>
              <button 
                onClick={() => {
                  console.clear();
                  console.log('=== ğŸ” éªŒè¯å…ƒç´ å±æ€§ ===\n');
                  
                  let successCount = 0;
                  let failCount = 0;
                  
                  testElements.forEach(elem => {
                    const domElem = document.getElementById(elem.id);
                    if (domElem) {
                      const hasExpectedAttrs = Object.keys(elem.attrs).length > 0;
                      const actualValue = domElem.getAttribute('data-schema-params');
                      
                      const isCorrect = (
                        (!elem.attrs['data-schema-params'] && !actualValue) ||
                        (actualValue === elem.attrs['data-schema-params'])
                      );
                      
                      if (hasExpectedAttrs && isCorrect) {
                        console.log(`âœ… ${elem.id}:`, {
                          'data-schema-params': actualValue,
                          'çŠ¶æ€': 'æ­£ç¡®'
                        });
                        successCount++;
                      } else if (!hasExpectedAttrs) {
                        console.log(`âšª ${elem.id}: æ­¤å…ƒç´ é¢„æœŸæ— å±æ€§ï¼ˆæ­£ç¡®ï¼‰`);
                      } else {
                        console.error(`âŒ ${elem.id}:`, {
                          'å®é™…': actualValue,
                          'æœŸæœ›': elem.attrs['data-schema-params'],
                          'çŠ¶æ€': 'é”™è¯¯'
                        });
                        failCount++;
                      }
                    }
                  });
                  
                  console.log(`\nğŸ“Š ç»Ÿè®¡: ${successCount} ä¸ªæˆåŠŸ, ${failCount} ä¸ªå¤±è´¥`);
                  
                  if (failCount > 0) {
                    alert(`âš ï¸ å‘ç° ${failCount} ä¸ªå…ƒç´ å±æ€§ä¸æ­£ç¡®\nè¯·æŸ¥çœ‹Consoleäº†è§£è¯¦æƒ…`);
                  } else {
                    alert(`âœ… æ‰€æœ‰å…ƒç´ å±æ€§éªŒè¯é€šè¿‡ï¼\n\nç°åœ¨å¯ä»¥æ¿€æ´»æ’ä»¶è¿›è¡Œæµ‹è¯•äº†`);
                  }
                }}
                className="btn btn-primary"
              >
                ğŸ” éªŒè¯å…ƒç´ å±æ€§
              </button>
            </p>
          </div>

          <div className="section-title">String / Number ç±»å‹æµ‹è¯•</div>
          <div className="test-section">
            {testElements.filter(e => ['String', 'Number'].includes(e.typeTag)).map(elem => (
              <div 
                key={elem.id}
                id={elem.id}
                className="test-card"
                ref={setElementRef(elem.id, elem.attrs)}
              >
                <h3>
                  <span className={`badge badge-${elem.badge}`}>
                    {elem.badgeText}
                  </span>
                  {elem.title}
                  {elem.typeTag && <span className={`type-tag ${getTypeClassName(elem.typeTag)}`}>{elem.typeTag}</span>}
                </h3>
                <p>{elem.description}</p>
                {Object.keys(elem.attrs).length > 0 && (
                  <div className="attr-info">
                    data-schema-params: "{elem.attrs['data-schema-params']}"
                  </div>
                )}
                {elem.schemaKey && schemaData[elem.schemaKey] !== undefined && (
                  <div className="schema-display">
                    <div className="schema-title">ğŸ’¾ å½“å‰Schemaæ•°æ®ï¼š</div>
                    <pre className="schema-content">
                      {JSON.stringify(schemaData[elem.schemaKey], null, 2)}
                    </pre>
                  </div>
                )}
              </div>
            ))}
          </div>

          <div className="section-title">Object / Array ç±»å‹æµ‹è¯•</div>
          <div className="test-section">
            {testElements.filter(e => ['Object', 'Array'].includes(e.typeTag)).map(elem => (
              <div 
                key={elem.id}
                id={elem.id}
                className="test-card"
                ref={setElementRef(elem.id, elem.attrs)}
              >
                <h3>
                  <span className={`badge badge-${elem.badge}`}>
                    {elem.badgeText}
                  </span>
                  {elem.title}
                  {elem.typeTag && <span className={`type-tag ${getTypeClassName(elem.typeTag)}`}>{elem.typeTag}</span>}
                </h3>
                <p>{elem.description}</p>
                {Object.keys(elem.attrs).length > 0 && (
                  <div className="attr-info">
                    data-schema-params: "{elem.attrs['data-schema-params']}"
                  </div>
                )}
                {elem.schemaKey && schemaData[elem.schemaKey] !== undefined && (
                  <div className="schema-display">
                    <div className="schema-title">ğŸ’¾ å½“å‰Schemaæ•°æ®ï¼š</div>
                    <pre className="schema-content">
                      {JSON.stringify(schemaData[elem.schemaKey], null, 2)}
                    </pre>
                  </div>
                )}
              </div>
            ))}
          </div>

          <div className="section-title">Boolean ç±»å‹æµ‹è¯•</div>
          <div className="test-section">
            {testElements.filter(e => e.typeTag === 'Boolean').map(elem => (
              <div 
                key={elem.id}
                id={elem.id}
                className="test-card"
                ref={setElementRef(elem.id, elem.attrs)}
              >
                <h3>
                  <span className={`badge badge-${elem.badge}`}>
                    {elem.badgeText}
                  </span>
                  {elem.title}
                  {elem.typeTag && <span className={`type-tag ${getTypeClassName(elem.typeTag)}`}>{elem.typeTag}</span>}
                </h3>
                <p>{elem.description}</p>
                {Object.keys(elem.attrs).length > 0 && (
                  <div className="attr-info">
                    data-schema-params: "{elem.attrs['data-schema-params']}"
                  </div>
                )}
                {elem.schemaKey && schemaData[elem.schemaKey] !== undefined && (
                  <div className="schema-display">
                    <div className="schema-title">ğŸ’¾ å½“å‰Schemaæ•°æ®ï¼š</div>
                    <pre className="schema-content">
                      {JSON.stringify(schemaData[elem.schemaKey], null, 2)}
                    </pre>
                  </div>
                )}
              </div>
            ))}
          </div>

          <div className="section-title">æ— æ•ˆå…ƒç´ æµ‹è¯•</div>
          <div className="test-section">
            {testElements.filter(e => !e.typeTag).map(elem => (
              <div 
                key={elem.id}
                id={elem.id}
                className="test-card"
                ref={setElementRef(elem.id, elem.attrs)}
              >
                <h3>
                  <span className={`badge badge-${elem.badge}`}>
                    {elem.badgeText}
                  </span>
                  {elem.title}
                </h3>
                <p>{elem.description}</p>
              </div>
            ))}
          </div>

          <div className="console-output">
            <div style={{ marginBottom: '10px', fontWeight: 'bold' }}>ğŸ“‹ æ§åˆ¶å°è¾“å‡ºï¼š</div>
            {logs.length === 0 ? (
              <div style={{ color: '#666' }}>ç­‰å¾…æ’ä»¶æ“ä½œ...</div>
            ) : (
              logs.map((log, index) => (
                <div key={index} className={`console-${log.type}`}>
                  [{log.time}] {log.message}
                  {log.data && (
                    <div style={{ marginLeft: '20px', fontSize: '12px' }}>
                      {JSON.stringify(log.data, null, 2)}
                    </div>
                  )}
                </div>
              ))
            )}
          </div>
        </div>
      );
    }

    ReactDOM.render(<TestApp />, document.getElementById('root'));
  </script>
</body>
</html>

# Schema Editor 测试指南

## ✅ 服务器已启动

### 1️⃣ 插件开发服务器
- **状态**: ✅ 运行中（后台）
- **模式**: 开发模式（带HMR）
- **输出目录**: `/Users/lyj/Desktop/project/ChromeTools/dist`

### 2️⃣ 测试页面服务器
- **状态**: ✅ 运行中（后台）
- **地址**: http://localhost:8080
- **页面**: http://localhost:8080/index.html

---

## 🚀 开始测试

### 步骤 1: 加载Chrome扩展

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择目录：`/Users/lyj/Desktop/project/ChromeTools/dist`

加载成功后，你会在工具栏看到Schema Editor图标。

### 步骤 2: 打开测试页面

在浏览器中访问：**http://localhost:8080/index.html**

### 步骤 3: 激活插件

点击浏览器工具栏中的 **Schema Editor** 图标
- 图标标题会变为"已激活"

### 步骤 4: 测试功能

#### 🖱️ Hover测试
- 将鼠标悬停在测试元素上
- **有效元素**：显示蓝色高亮边框 + 属性值tooltip
- **无效元素**：显示"非法目标"红色提示

#### 👆 点击测试
1. 点击任意有效的测试元素（前3个）
2. 右侧抽屉自动打开
3. Monaco Editor 显示JSON数据

#### ✏️ 编辑测试
1. 在编辑器中修改JSON内容
2. 点击 **"格式化"** 按钮美化代码
3. 点击 **"保存"** 按钮
4. 查看页面底部的控制台输出

---

## 📋 测试元素说明

页面包含5个测试元素：

| 元素 | 属性 | 预期行为 |
|------|------|---------|
| **测试元素 1** | `$chatMsgId: 'msg-001'` | ✅ 有效，返回消息Schema |
| **测试元素 2** | `$openerComponentId: 'comp-001'` | ✅ 有效，返回组件Schema |
| **测试元素 3** | 两个属性都有 | ✅ 有效，返回复杂Schema |
| **测试元素 4** | 无属性 | ❌ 非法目标 |
| **测试元素 5** | 包含子元素 | ✅ 有效，测试嵌套 |

---

## 🔍 调试技巧

### 查看Console日志

1. **插件日志**：
   - 打开 `chrome://extensions/`
   - 找到Schema Editor
   - 点击 "service worker" 或 "检查视图"
   - 查看Console

2. **页面日志**：
   - 按 `F12` 打开开发者工具
   - 查看Console面板
   - 测试页面底部也会显示操作日志

### 常见问题

**Q: 插件没有反应？**
- 确认已点击工具栏图标激活
- 刷新测试页面重试

**Q: 点击元素没有打开抽屉？**
- 检查元素是否有蓝色高亮（说明有属性）
- 查看Console是否有错误信息

**Q: Monaco Editor 加载很慢？**
- 第一次加载需要下载Monaco Editor（~3MB）
- 后续会使用缓存，加载速度会快很多

---

## 🔧 开发提示

### 热更新（HMR）
- 修改源代码后，插件会自动重新构建
- 刷新测试页面即可看到更改（无需重新加载扩展）

### 修改测试数据
编辑 `/Users/lyj/Desktop/project/ChromeTools/test/index.html`
- 搜索 `window.__getSchemaById` 函数
- 修改 `schemas` 对象中的测试数据
- 刷新页面生效

---

## 🎯 功能清单

测试以下功能是否正常：

- [ ] 点击图标激活/停用
- [ ] Hover时显示高亮和tooltip
- [ ] 有效元素显示属性值
- [ ] 无效元素显示"非法目标"
- [ ] 点击元素打开抽屉
- [ ] Monaco Editor正确显示JSON
- [ ] JSON格式化功能
- [ ] 保存时触发更新
- [ ] 成功/失败的Message提示
- [ ] 抽屉关闭功能
- [ ] 样式不受页面影响

---

## 🛑 停止服务器

如需停止服务器，在终端中按 `Ctrl + C`

